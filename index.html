<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="An ancient digital artifact. Origin unknown. This terminal-based relic reconstructs historical narratives from decoupled data streams.">
    <meta name="robots" content="index, follow">
    <title>STORYENGINE | Ancient Artifact</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:ital,wght@0,400;0,700;1,400;1,700&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/png" href="assets/img_logo_gear.png">
    <link rel="stylesheet" href="scripts/style.css">
</head>

<body>

    <!-- Foliage entry overlay (Session-based) -->
    <div id="foilage-overlay" class="foilage-overlay hidden">
        <img src="assets/foilage.png" alt="Overgrown Foliage" class="foilage-img">
        <div class="foilage-hint">CLICK TO EXCAVATE</div>
    </div>

    <!-- Vintage radio attachment persistent across all views -->
    <div id="vintage-radio" class="vintage-radio-attachment" title="Toggle Radio">
        <div class="radio-speaker-grill"></div>
        <div class="radio-dial"></div>
        <div class="radio-antenna"></div>
        <span class="radio-label">FM/AM</span>
        <div class="radio-volume-controls">
            <button id="radio-voldown" class="radio-vol-btn" title="Volume Down">-</button>
            <button id="radio-volup" class="radio-vol-btn" title="Volume Up">+</button>
        </div>
    </div>

    <div class="engine-frame">
        <div class="mainframe-branding">
            <div class="branding-label">
                <img src="assets/img_logo_gear.png" alt="Story Gear Logo" class="mainframe-logo">
                <span class="mainframe-title">STORYENGINE</span>
            </div>
        </div>

        <!-- TV screen area — video plays inside here -->
        <div id="tv-screen" class="tv-screen">
            <video id="boot-video" playsinline preload="auto">
                <source src="assets/vid_boot.mp4" type="video/mp4">
            </video>
            <video id="shutdown-video" playsinline preload="auto">
                <source src="assets/vid_shutdown.mp4" type="video/mp4">
            </video>
        </div>
        <!-- Terminal interface — replaces tv-screen inside the same frame -->
        <header id="main-interface" class="hidden" role="main">
            <div id="terminal-interface">
                <div id="terminal-output"></div>
                <div class="input-line">
                    <span class="prompt" aria-hidden="true">admin@engine:~$</span>
                    <label for="terminal-input" class="sr-only">Enter command</label>
                    <input type="text" id="terminal-input" autofocus spellcheck="false" placeholder="Enter command"
                        aria-label="Terminal input">
                </div>
            </div>
        </header>
        <!-- Controls row — below screen like a real TV -->
        <div class="frame-controls">
            <div class="tv-control-group power-control">
                <span class="tv-control-label">MAIN PWR</span>
                <div class="power-btn-container" style="display:flex; align-items:center; gap:8px;">
                    <button id="tvbutton" class="tv-power-btn" aria-label="Power toggle">•</button>
                </div>
            </div>
            <div class="frame-controls-right">
                <div class="tv-control-group">
                    <span class="tv-control-label">MANUEL</span>
                    <button id="manual-btn" class="tv-manual-btn" title="Manual / Help">•</button>
                </div>
                <div class="tv-control-group">
                    <span class="tv-control-label">SPEAKER</span>
                    <button id="mute-btn" class="tv-mute-btn" title="Toggle sound">•</button>
                </div>
            </div>
        </div>

    </div>

    <main id="engine-viewport" class="hidden" role="region" aria-label="Story content">
        <section id="narrative-container">
            <h2 id="display-title"></h2>
            <div id="story-body"></div>
        </section>

        <section id="logic-exhibit" class="hidden">
            <hr>
            <h3>LOGIC_EXERCISE</h3>
            <div id="exercise-ui"></div>
            <div id="visual-result"></div>
        </section>
    </main>

    <script src="scripts/engine.js"></script>
    <!-- Manual popup — appears on screen like a map -->
    <div id="manual-overlay" class="manual-overlay hidden">
        <div class="manual-content">

            <div id="manual-page-1" class="manual-page">
                <h2>OPERATOR'S MANUAL – STORY ENGINE v1.3</h2>
                <p class="manual-date">Revised 4 November 1952<br>Serial No.: SE-1347-A<br>Classification: TOP SECRET –
                    TECH-JCORP INTERNAL USE</p>
                <p>The <strong>STORY ENGINE</strong> is a narrative computation device, manufactured by Tech-JCorp.
                    Designed for operational deployment, it delivers textual transmissions to the viewing screen.</p>
                <hr>
                <h3>TERMINAL OPERATION DIRECTORY:</h3>
                <ul>
                    <li><code>list</code> — Displays complete catalog of chronicles.</li>
                    <li><code>[Number]</code> — Enter code to initiate transmission.</li>
                    <li><code>back</code> — Cease current transmission; return to directory.</li>
                    <li><code>clear</code> — Erase all content from cathode-ray display.</li>
                    <li><code>exit</code> — Disconnect and prepare unit for shutdown.</li>
                </ul>
                <hr>
                <h3>MAINTENANCE AND SAFETY:</h3>
                <ul>
                    <li>Allow unit to reach operating temperature before first query.</li>
                    <li>Unknown dialect inputs may produce audible echo. Issue commands exactly as specified.</li>
                </ul>
            </div>

            <div id="manual-page-2" class="manual-page hidden">
                <h2>ENGINE ARCHITECTURE & FIELD SPECIFICATIONS</h2>
                <p class="manual-date">Classification: RESTRICTED – TECH-JCORP INTERNAL</p>
                <p>The <strong>STORY ENGINE</strong> represents a revolutionary leap in declassified military data
                    retrieval. Utilizing a zero-dependency logic kernel, the system reconstructs historical data
                    clusters with 99.8% accuracy.</p>
                <hr>
                <h3>TECHNICAL INFRASTRUCTURE:</h3>
                <ul>
                    <li><strong>CORE ENGINE:</strong> Vanilla JavaScript (ES6+) logic kernel.</li>
                    <li><strong>VISUALS:</strong> CSS3 CRT simulation with hardware-accelerated scanlines.</li>
                    <li><strong>DATA:</strong> Asynchronous JSON narrative injection (Fetch API v2.0).</li>
                    <li><strong>AESTHETICS:</strong> Bento-box framing with authentic 1950s documentary fidelity.</li>
                </ul>
                <hr>
                <p><em>Note:</em> The engine utilizes advanced memory caching to prevent white-screen flashes during
                    asset reconstruction.</p>
            </div>

            <div id="manual-page-3" class="manual-page hidden">
                <h2>JAGUAR MODULE & ANOMALOUS PHENOMENA</h2>
                <p class="manual-date">CLASSIFIED: JAGUAR CLEARANCE ONLY</p>
                <p>The **Jaguar module** is energized via the **Temple Gem** interface. Activation may induce anomalous
                    computational phenomena; these events are irregular and may present as unpredictable textual or
                    visual outputs.</p>
                <hr>
                <div
                    style="text-align: center; padding: 15px; border: 2px dashed #000; background: rgba(0,0,0,0.05); margin: 10px 0;">
                    <p style="margin: 0;"><strong>ANOMALY ALERT:</strong> randomized outputs are not indicative of
                        system malfunction. Operators must document all anomalies and report to
                        <strong>tech-jcorp.org</strong> for oversight.
                    </p>
                </div>
                <hr>
                <p>The jaguar is energized with a temple gem that creates strange paranormal anomalies. The future is
                    written in the stone of the past. Keep digging, operator.</p>
            </div>

            <div class="manual-footer-controls">
                <div class="manual-pagination">
                    <button id="prev-page" class="manual-nav-btn">&larr; PREV</button>
                    <span id="page-indicator">PAGE 1 / 3</span>
                    <button id="next-page" class="manual-nav-btn">NEXT &rarr;</button>
                </div>
                <button id="close-manual" class="manual-close-btn" style="margin-left: auto;">Put away Manuel</button>
            </div>
        </div>
    </div>

    <!-- Hidden audio element for the vintage radio -->
    <audio id="radio-audio" preload="auto">
        <source src="assets/snd_radio_01.mp3" type="audio/mpeg">
    </audio>

    <!-- Hidden audio elements for TV boot and shutdown -->
    <audio id="on-audio" preload="auto">
        <source src="assets/sfx_power_on.mp3" type="audio/mpeg">
    </audio>
    <audio id="logo-audio" preload="auto">
        <source src="assets/sfx_logo_flash.mp3" type="audio/mpeg">
    </audio>

    <audio id="off-audio" preload="auto">
        <source src="assets/sfx_power_off.mp3" type="audio/mpeg">
    </audio>

    <!-- Radio Interference tracks -->
    <audio id="inter-01" preload="auto">
        <source src="assets/sfx_inter_01.mp3" type="audio/mpeg">
    </audio>
    <audio id="inter-02" preload="auto">
        <source src="assets/sfx_inter_02.mp3" type="audio/mpeg">
    </audio>
    <audio id="inter-03" preload="auto">
        <source src="assets/sfx_inter_03.mp3" type="audio/mpeg">
    </audio>

    <audio id="rustling-audio" preload="auto">
        <source src="assets/rustling" type="audio/mpeg">
    </audio>

</body>

</html>